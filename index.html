<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Rookie - Mature Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(20, 20, 30, 0.95);
            max-width: 900px;
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
            overflow: hidden;
            border: 2px solid rgba(255, 0, 0, 0.3);
        }

        .header {
            background: linear-gradient(135deg, #8B0000 0%, #450000 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid #ff0000;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            letter-spacing: 3px;
        }

        .badge {
            font-size: 0.9em;
            opacity: 0.9;
            letter-spacing: 2px;
            color: #ffcccc;
        }

        .warning {
            background: rgba(255, 0, 0, 0.2);
            padding: 15px;
            margin: 20px;
            border-radius: 8px;
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6666;
            text-align: center;
            font-size: 0.9em;
        }

        .story-container {
            padding: 40px;
            min-height: 400px;
            background: rgba(10, 10, 20, 0.5);
        }

        .story-text {
            font-size: 1.15em;
            line-height: 1.9;
            color: #e0e0e0;
            margin-bottom: 30px;
            text-align: justify;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .action-indicator {
            color: #ff4444;
            font-weight: bold;
            font-size: 1.1em;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .choice-btn {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 18px 25px;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
            border-color: rgba(255, 0, 0, 0.5);
        }

        .choice-btn.violent {
            border-color: rgba(255, 0, 0, 0.5);
            background: linear-gradient(135deg, #2d0a0a 0%, #1a0505 100%);
        }

        .choice-btn.diplomatic {
            border-color: rgba(0, 255, 0, 0.3);
            background: linear-gradient(135deg, #0a2d0a 0%, #051a05 100%);
        }

        .choice-btn.corrupt {
            border-color: rgba(255, 215, 0, 0.4);
            background: linear-gradient(135deg, #2d2d0a 0%, #1a1a05 100%);
        }

        .choice-btn:active {
            transform: translateY(0);
        }

        .stats {
            background: rgba(20, 20, 30, 0.8);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #999;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .stat-value.low {
            color: #ff4444;
        }

        .stat-value.high {
            color: #44ff44;
        }

        .ending {
            background: linear-gradient(135deg, #8B0000 0%, #450000 100%);
            color: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
            border: 2px solid rgba(255, 0, 0, 0.5);
        }

        .ending h2 {
            margin-bottom: 15px;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .ending.best {
            background: linear-gradient(135deg, #006400 0%, #003200 100%);
            border-color: rgba(0, 255, 0, 0.5);
        }

        .ending.bad {
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
            border-color: rgba(100, 100, 100, 0.5);
        }

        .restart-btn {
            background: white;
            color: #8B0000;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .story-container {
                padding: 20px;
            }
            
            .story-text {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üöî THE ROOKIE</h1>
            <div class="badge">MATURE EDITION - 17+</div>
        </div>
        
        <div class="warning">
            ‚ö†Ô∏è ADVERTENCIA: Este juego contiene violencia gr√°fica, lenguaje fuerte y situaciones intensas. No apto para menores.
        </div>
        
        <div class="story-container">
            <div class="stats" id="stats">
                <div class="stat">
                    <div class="stat-label">Moral</div>
                    <div class="stat-value" id="morality">50</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Reputaci√≥n</div>
                    <div class="stat-value" id="reputation">50</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Instinto</div>
                    <div class="stat-value" id="instinct">50</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Violencia</div>
                    <div class="stat-value" id="violence">0</div>
                </div>
            </div>
            
            <div class="story-text" id="story"></div>
            <div class="choices" id="choices"></div>
        </div>
    </div>

    <script>
        let gameState = {
            morality: 50,
            reputation: 50,
            instinct: 50,
            violence: 0,
            currentScene: 'inicio',
            decisions: [],
            kills: 0,
            wounded: 0
        };

        const scenes = {
            inicio: {
                text: `Primer d√≠a. 6:47 AM.\n\nLa estaci√≥n apesta a caf√© viejo y desesperaci√≥n. Tu nueva placa todav√≠a brilla, no como las de los veteranos que est√°n desgastadas por a√±os de mierda.\n\nEl Sargento Rodr√≠guez se acerca. Cicatrices en la cara, ojos que han visto demasiado. "Novato. Conmigo. Y escucha bien: aqu√≠ afuera no hay h√©roes, solo supervivientes y cad√°veres. ¬øEntendido?"\n\nTe lanza un chaleco antibalas. Pesa como la puta realidad.`,
                choices: [
                    {
                        text: '"Entendido, Sargento. Har√© lo que sea necesario."',
                        next: 'patrulla_dura',
                        effects: { morality: -5, reputation: 10, instinct: 5 },
                        class: 'violent'
                    },
                    {
                        text: '"S√≠ se√±or, pero... ¬øno hay protocolos que seguir?"',
                        next: 'patrulla_dura',
                        effects: { morality: 10, reputation: -5, instinct: -5 },
                        class: 'diplomatic'
                    },
                    {
                        text: '"Entiendo. Las calles son jodidas, pero vine a hacer la diferencia."',
                        next: 'patrulla_dura',
                        effects: { morality: 5, instinct: 10 },
                        class: 'diplomatic'
                    }
                ]
            },

            patrulla_dura: {
                text: `90 minutos despu√©s...\n\nLa radio explota con est√°tica: "TODAS LAS UNIDADES - 211 EN PROGRESO, TIENDA 7-ELEVEN CALLE ELM. SOSPECHOSO ARMADO. POSIBLES DISPAROS."\n\nRodr√≠guez ya tiene el pie en el acelerador. "¬øListo para tu bautismo de fuego, novato?"\n\nEst√°n a tres cuadras. Pueden o√≠r las sirenas de otras unidades m√°s lejos.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(ACELERAR)</span> "¬°VAMOS! Somos los m√°s cercanos, carajo!"',
                        next: 'llegada_rapida',
                        effects: { reputation: 15, instinct: 10, morality: 5 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(EVALUAR)</span> "Esperemos respaldo. No sabemos con qu√© nos enfrentamos."',
                        next: 'espera_respaldo',
                        effects: { instinct: 15, morality: 10, reputation: -10 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(PREPARAR)</span> "Vamos, pero con cuidado. Revisemos el arma."',
                        next: 'llegada_tactica',
                        effects: { instinct: 20, reputation: 5 },
                        class: 'diplomatic'
                    }
                ]
            },

            llegada_rapida: {
                text: `Las llantas chillan. Llegan en 45 segundos.\n\nA trav√©s del vidrio ves una escena del infierno: un tipo con m√°scara de esqu√≠, pistola en mano, gritando al cajero. Hay dos clientes en el suelo, uno est√° sangrando del brazo.\n\n"¬°MIERDA!" - Rodr√≠guez desenfunda. "¬°Novato, por la entrada trasera! ¬°YA!"\n\nTu coraz√≥n late a mil. Tu mano tiembla sobre tu Glock 19. Primera vez que podr√≠as tener que usarla.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(IRRUMPIR)</span> Entrar por la puerta principal, arma en alto, gritar √≥rdenes',
                        next: 'confrontacion_directa',
                        effects: { violence: 20, reputation: 15, morality: -10, instinct: -5 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(FLANQUEAR)</span> Rodear silenciosamente, cubrir la salida trasera',
                        next: 'tactica_trasera',
                        effects: { instinct: 20, reputation: 10 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(NEGOCIAR)</span> Usar el altavoz del auto, intentar que se rinda',
                        next: 'intento_negociacion',
                        effects: { morality: 15, instinct: 10, reputation: -5 },
                        class: 'diplomatic'
                    }
                ]
            },

            confrontacion_directa: {
                text: `"¬°POLIC√çA! ¬°SUELTA EL ARMA, HIJO DE PUTA!"\n\nIrrumpes como en las pel√≠culas. Todo se vuelve lento.\n\nEl sospechoso se gira. Ves sus ojos - est√° drogado, completamente ido. Su dedo est√° en el gatillo.\n\nRodr√≠guez grita "¬°ABAJO!"\n\nEl tipo levanta el arma hacia ti. Medio segundo para decidir.\n\nTu dedo est√° en el gatillo. Todo tu entrenamiento grita: ELIMINA LA AMENAZA.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(DISPARAR)</span> Dos al pecho, uno a la cabeza. Protocolo.',
                        next: 'disparo_mortal',
                        effects: { violence: 40, morality: -20, reputation: 15, instinct: -10 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(PIERNA)</span> Dispararle a la pierna, neutralizar sin matar',
                        next: 'disparo_pierna',
                        effects: { violence: 20, morality: 5, instinct: 15, reputation: -5 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(ESQUIVAR)</span> Lanzarte al suelo, rodar, buscar cobertura',
                        next: 'esquiva_tactica',
                        effects: { instinct: 25, morality: 10 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(GRITAR)</span> "¬°NO LO HAGAS! ¬°PIENSA EN TU FAMILIA!"',
                        next: 'ultimo_intento',
                        effects: { morality: 20, instinct: 10, reputation: -10 },
                        class: 'diplomatic'
                    }
                ]
            },

            disparo_mortal: {
                text: `BANG. BANG. BANG.\n\nTres disparos. El retroceso te sacude el brazo.\n\nEl sospechoso cae. Sangre. Mucha sangre. Se expande en el suelo como aceite rojo.\n\nPrimer d√≠a. Primera muerte.\n\nEl cajero est√° gritando. Los rehenes est√°n gritando. Tus manos tiemblan.\n\nRodr√≠guez se acerca al cuerpo, revisa el pulso. "Est√° muerto." Te mira. "Buen trabajo, novato. Fue √©l o t√∫."\n\nPero cuando revisas el arma del sospechoso... es una puta pistola de juguete pintada de negro.\n\nTu est√≥mago se contrae.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(REPORTAR)</span> "Sargento... el arma... es falsa..."',
                        next: 'final_disparo_juguete',
                        effects: { morality: -30, violence: 20 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(CALLAR)</span> No decir nada. Dejar que lo descubran despu√©s.',
                        next: 'final_encubrimiento',
                        effects: { morality: -40, reputation: 20, instinct: -20 },
                        class: 'corrupt'
                    },
                    {
                        text: '<span class="action-indicator">(JUSTIFICAR)</span> "Era una amenaza. Hice lo correcto."',
                        next: 'final_sin_remordimiento',
                        effects: { morality: -35, violence: 30, reputation: 15 },
                        class: 'violent'
                    }
                ]
            },

            disparo_pierna: {
                text: `BANG!\n\nLe disparas a la pierna. El sospechoso cae gritando, suelta el arma.\n\nRodr√≠guez lo inmoviliza en segundos. "¬°DESPEJADO!"\n\nSangre en todas partes, pero est√° vivo. Aullando de dolor, pero vivo.\n\nCuando revisas el arma... Cristo, es una pistola de juguete. Pintada de negro.\n\nEl tipo est√° llorando: "Mi... mi hermana... necesita medicinas... no ten√≠a dinero... lo siento... lo siento..."\n\nTiene 19 a√±os. Drogado hasta las cejas, pero solo 19.\n\nLa ambulancia llega. Los param√©dicos dicen que sobrevivir√° pero probablemente cojee de por vida.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(CONSOLAR)</span> "Vas a estar bien, chico. Te conseguiremos ayuda."',
                        next: 'final_compasivo',
                        effects: { morality: 20, reputation: 10, instinct: 15 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(INTERROGAR)</span> "¬øTu hermana? ¬°CASI MATAS A GENTE POR ESO!"',
                        next: 'final_justicia_dura',
                        effects: { morality: -5, reputation: 15, violence: 10 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(INVESTIGAR)</span> Verificar su historia sobre la hermana enferma',
                        next: 'final_investigacion',
                        effects: { instinct: 25, morality: 15, reputation: 10 },
                        class: 'diplomatic'
                    }
                ]
            },

            tactica_trasera: {
                text: `Te mueves silencioso, arma lista, adrenalina a tope.\n\nLlegas a la puerta trasera justo cuando se abre.\n\nUn tipo flaco, no m√°s de 20 a√±os, sale corriendo. M√°scara de esqu√≠, pero puedes ver que est√° llorando.\n\nChoca contigo. Cae al suelo.\n\n"¬°NO! ¬°POR FAVOR! ¬°Mi hermana est√° muriendo! ¬°No tengo dinero para sus medicinas!"\n\nEst√° desarmado. La pistola qued√≥ adentro. Solo tiene una botella de pastillas en la mano que rob√≥.\n\nLo tienes en el suelo. Podr√≠a arrestarlo f√°cilmente.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(ARRESTAR)</span> Esposarlo, leerle sus derechos. La ley es la ley.',
                        next: 'arresto_protocolo',
                        effects: { morality: -5, reputation: 15, instinct: -10 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(ESCUCHAR)</span> "Cu√©ntame sobre tu hermana. ¬øQu√© tiene?"',
                        next: 'escuchar_historia',
                        effects: { morality: 20, instinct: 20, reputation: -5 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(SOBORNAR)</span> "Te dejo ir... por 500 d√≥lares."',
                        next: 'inicio_corrupcion',
                        effects: { morality: -30, reputation: -20, instinct: -15 },
                        class: 'corrupt'
                    },
                    {
                        text: '<span class="action-indicator">(GOLPEAR)</span> Darle una paliza antes de arrestarlo',
                        next: 'brutalidad_policial',
                        effects: { violence: 30, morality: -35, reputation: -10 },
                        class: 'violent'
                    }
                ]
            },

            escuchar_historia: {
                text: `El chico solloza. Te muestra una foto arrugada en su billetera.\n\nUna ni√±a, tal vez 8 a√±os, con una pa√±oleta en la cabeza. C√°ncer. Leucemia.\n\n"Los doctores... dijeron que necesita un tratamiento experimental. $50,000. No tenemos seguro. Trabaj√© en McDonald's, Uber, lo que sea... no es suficiente. Ella tiene dos meses, tal vez..."\n\nLe revisas la billetera. $47 d√≥lares. Un recibo m√©dico del Hospital General. Todo verifica.\n\nRodr√≠guez aparece. "¬øQu√© tenemos, novato?"\n\nEl chico te mira con ojos suplicantes.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(ABOGAR)</span> "Sargento, hay circunstancias atenuantes aqu√≠..."',
                        next: 'final_heroe_compasivo',
                        effects: { morality: 30, instinct: 25, reputation: 15 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(ARRESTAR)</span> "Rob√≥ una tienda. Lo siento, pero es criminal."',
                        next: 'final_ley_ciega',
                        effects: { morality: -10, reputation: 10 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(AYUDAR)</span> "D√©jame hacer algunas llamadas. Conozco gente en trabajo social."',
                        next: 'final_salvador',
                        effects: { morality: 35, reputation: 20, instinct: 20 },
                        class: 'diplomatic'
                    }
                ]
            },

            espera_respaldo: {
                text: `"Esperemos respaldo, Sargento. No sabemos si hay m√°s sospechosos."\n\nRodr√≠guez te mira con desprecio. "Cobarde."\n\nEsperan. 3 minutos. 4 minutos.\n\nBANG. BANG. BANG.\n\nDisparos desde la tienda.\n\n"¬°MIERDA!" Rodr√≠guez arranca el auto.\n\nCuando llegan, hay un cuerpo en el piso. El cajero. Muerto. Balazo en la cabeza.\n\nEl sospechoso huy√≥.\n\nRodr√≠guez te mira. "Esto es culpa tuya, novato. Ese hombre ten√≠a familia."`,
                choices: [
                    {
                        text: '<span class="action-indicator">(DEFENDERSE)</span> "Segu√≠ el protocolo, no es mi culpa."',
                        next: 'final_cobarde',
                        effects: { morality: -25, reputation: -30, instinct: -20 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(ACEPTAR)</span> "Tiene raz√≥n. Deb√≠ actuar."',
                        next: 'final_leccion_dura',
                        effects: { morality: 15, instinct: 25, reputation: -15 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(RENUNCIAR)</span> "No puedo hacer esto. Renuncio."',
                        next: 'final_renuncia',
                        effects: { morality: 0, reputation: -40 },
                        class: 'diplomatic'
                    }
                ]
            },

            // FINALES
            final_disparo_juguete: {
                text: `Reportas todo. Honestamente.\n\nInvestigaci√≥n Interna. Suspensi√≥n con pago. Terapia obligatoria.\n\nEl tiroteo se declara "justificado bajo circunstancias". Pero las pesadillas no paran.\n\nEl sospechoso se llamaba Marcus Thompson. 22 a√±os. Su hermana muri√≥ tres d√≠as despu√©s sin el tratamiento.\n\nSeis meses despu√©s, sigues siendo polic√≠a. M√°s cauteloso. M√°s humano. Pero nunca olvidar√°s esa primera muerte.\n\nCada noche ves su cara.`,
                ending: "FINAL: EL PESO DE LA PLACA",
                endingType: "neutral",
                stats: true
            },

            final_encubrimiento: {
                text: `No dices nada. Rodr√≠guez nota el arma de juguete y te mira.\n\n"Novato... ven aqu√≠." En voz baja: "Nadie m√°s tiene que saber esto. Fue un tiroteo leg√≠timo. ¬øEntendido?"\n\nAsientes. Primer encubrimiento. Primer paso hacia la corrupci√≥n.\n\nEl reporte dice "sospechoso armado con pistola calibre 9mm". Caso cerrado.\n\nPero empiezas a beber. Las mentiras pesan. Te conviertes en el tipo de polic√≠a que juraste nunca ser.\n\n15 a√±os despu√©s, eres Sargento. Corrupto. Brutal. Odiado por la comunidad.\n\nY nunca pudiste dormir bien otra vez.`,
                ending: "FINAL: EL POLIC√çA CORRUPTO",
                endingType: "bad",
                stats: true
            },

            final_compasivo: {
                text: `Consolas al chico mientras lo llevan al hospital.\n\nInvestigas su historia. Todo es verdad. Su hermana tiene leucemia.\n\nUsas tus propios contactos. Llamas a trabajadores sociales, organizaciones ben√©ficas, incluso a la prensa local.\n\nLa historia se vuelve viral. "Polic√≠a ayuda a familia desesperada."\n\nSe recaudan $75,000 en donaciones. M√°s que suficiente para el tratamiento.\n\nLa hermana sobrevive. El chico cumple servicios comunitarios en lugar de c√°rcel.\n\n5 a√±os despu√©s, √©l es trabajador social. T√∫ eres detective.\n\n√âl te invita a la graduaci√≥n universitaria de su hermana. Ella est√° sana.\n\n"Gracias por ver al humano, no solo al criminal."`,
                ending: "FINAL: EL VERDADERO H√âROE",
                endingType: "best",
                stats: true
            },

            final_heroe_compasivo: {
                text: `Abog√°s por √©l. Rodr√≠guez escucha tu caso.\n\n"Tiene agallas, novato. Y coraz√≥n."\n\nConectan a la familia con servicios sociales de emergencia. La hermana recibe tratamiento gratuito a trav√©s de un programa estatal que nadie sab√≠a que exist√≠a.\n\nEl chico acepta programa de rehabilitaci√≥n y servicios comunitarios.\n\n2 a√±os despu√©s: hermana sana, chico trabajando honestamente, sin antecedentes penales.\n\nRodr√≠guez te palmea el hombro: "Esto es lo que significa servir y proteger."\n\nSalvaste dos vidas ese d√≠a. Y tu alma.`,
                ending: "FINAL: PROTEGER Y SERVIR",
                endingType: "best",
                stats: true
            },

            final_cobarde: {
                text: `Te aferras al protocolo. Pero todos saben la verdad.\n\nUna vida se perdi√≥ porque dudaste.\n\nLa estaci√≥n te apoda "el Cobarde". Nadie quiere patrullar contigo.\n\n6 meses despu√©s, te transfieren a trabajo de escritorio.\n\nNunca vuelves a las calles.\n\nT√©cnicamente sigues siendo polic√≠a. Pero sabes que fallaste cuando m√°s importaba.`,
                ending: "FINAL: EL COBARDE",
                endingType: "bad",
                stats: true
            },

            final_leccion_dura: {
                text: `Aceptas la responsabilidad. La culpa.\n\nEsa muerte te persigue, pero no te destruye.\n\nTe conviertes en el polic√≠a m√°s preparado, m√°s r√°pido, m√°s decisivo de la estaci√≥n.\n\nNunca m√°s dudas cuando una vida est√° en juego.\n\nRodr√≠guez te nombra su segundo al mando.\n\n"Aprendiste la lecci√≥n m√°s dura, novato. Y no te rompi√≥. Eso te hace excepcional."\n\nSalvas 12 vidas en los siguientes 5 a√±os. Pero nunca olvidas la que perdiste.`,
                ending: "FINAL: FORJADO EN FUEGO",
                endingType: "good",
                stats: true
            },

            final_salvador: {
                text: `Haces m√°s que tu trabajo. Haces lo correcto.\n\nLlamas a contactos en trabajo social, hospitales, ONGs. Trabajas en tu tiempo libre.\n\nLa hermana recibe tratamiento gratuito. Se recupera completamente.\n\nEl chico evita la c√°rcel, entra en rehabilitaci√≥n y programas de empleo.\n\n3 a√±os despu√©s, es enfermero. Insp√≠rado por los que salvaron a su hermana.\n\nTe ve en la calle: "Oficial... usted me salv√≥. Me dio una segunda oportunidad."\n\nRodr√≠guez se entera y te recomienda para Detective.\n\n"No eres solo un buen polic√≠a, novato. Eres un buen ser humano."`,
                ending: "FINAL: M√ÅS ALL√Å DEL DEBER",
                endingType: "best",
                stats: true
            },

            llegada_tactica: {
                text: `"Vamos con cuidado, Sargento."\n\nRevisas tu Glock. Cargador lleno. Bala en rec√°mara. Seguro quitado.\n\nLlegan sin sirenas. Se estacionan a media cuadra.\n\nDesde aqu√≠ ven la tienda. Hay movimiento adentro. Gente en el suelo. Un tipo con m√°scara gritando.\n\nRodr√≠guez asiente con aprobaci√≥n. "Buen instinto, novato. Ahora, ¬øc√≥mo entramos?"`,
                choices: [
                    {
                        text: '<span class="action-indicator">(FLANQUEAR)</span> Dividirse - uno adelante, uno atr√°s',
                        next: 'tactica_trasera',
                        effects: { instinct: 15, reputation: 10 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(NEGOCIAR)</span> Intentar contacto por meg√°fono primero',
                        next: 'intento_negociacion',
                        effects: { morality: 15, instinct: 10 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(OBSERVAR)</span> Esperar y ver qu√© hace el sospechoso',
                        next: 'observacion_tactica',
                        effects: { instinct: 20, morality: 5 },
                        class: 'diplomatic'
                    }
                ]
            },

            intento_negociacion: {
                text: `Agarras el meg√°fono de la patrulla.\n\n"Atenci√≥n en la tienda. Soy el Oficial [tu nombre]. Estamos aqu√≠ para ayudar. Nadie tiene que salir herido. Suelta el arma y sal con las manos arriba."\n\nSilencio.\n\nLuego una voz quebrada desde adentro: "¬°NO! ¬°Mi hermana se est√° muriendo! ¬°Necesito estas medicinas! ¬°No voy a la c√°rcel!"\n\nRodr√≠guez te mira. "Es joven. Est√° asustado. Podr√≠a funcionar... o podr√≠a empeorar."`,
                choices: [
                    {
                        text: '<span class="action-indicator">(EMPATIZAR)</span> "Entiendo que est√©s desesperado. Podemos ayudar a tu hermana."',
                        next: 'negociacion_exitosa',
                        effects: { morality: 25, instinct: 20, reputation: 15 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(PRESIONAR)</span> "Sal ahora o entramos por la fuerza. Tu elecci√≥n."',
                        next: 'negociacion_tensa',
                        effects: { reputation: 10, violence: 10 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(MENTIR)</span> "Te garantizo que no ir√°s a la c√°rcel. Solo sal."',
                        next: 'mentira_tactica',
                        effects: { morality: -15, reputation: 5, instinct: 10 },
                        class: 'corrupt'
                    }
                ]
            },

            negociacion_exitosa: {
                text: `"Escucha, s√© que tu hermana te necesita. Por eso mismo debes rendirte. Muerto o en la c√°rcel no puedes ayudarla. Pero si sales ahora, trabajaremos contigo."\n\nSilencio largo.\n\nLa puerta se abre lentamente. El tipo sale. M√°scara de esqu√≠. Manos arriba. Est√° llorando.\n\nEs un chico. Tal vez 20 a√±os.\n\n"Por favor... ella solo tiene 8 a√±os... leucemia..."\n\nRodr√≠guez lo esposa suavemente. Te mira impresionado.\n\n"Buen trabajo, novato. Salvaste vidas hoy."`,
                choices: [
                    {
                        text: '<span class="action-indicator">(AYUDAR)</span> Verificar su historia e intentar ayudar realmente',
                        next: 'final_salvador',
                        effects: { morality: 30, reputation: 25 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(PROCESAR)</span> Arrestarlo pero recomendar clemencia en corte',
                        next: 'final_heroe_compasivo',
                        effects: { morality: 15, reputation: 20 },
                        class: 'diplomatic'
                    }
                ]
            },

            negociacion_tensa: {
                text: `"Tienes 30 segundos o entramos."\n\nBANG!\n\nUn disparo desde adentro. Sale por la ventana.\n\n"¬°MIERDA!" Rodr√≠guez se tira al suelo.\n\nEl tipo sale corriendo por la puerta trasera.\n\nTienes que decidir AHORA.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(PERSEGUIR)</span> Correr tras √©l',
                        next: 'persecucion_a_pie',
                        effects: { instinct: 15, violence: 10 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(VERIFICAR)</span> Entrar a la tienda, ver si hay heridos',
                        next: 'verificar_victimas',
                        effects: { morality: 20, instinct: 15 },
                        class: 'diplomatic'
                    }
                ]
            },

            esquiva_tactica: {
                text: `Te lanzas al suelo justo cuando dispara.\n\nBANG!\n\nLa bala pasa silbando donde estaba tu cabeza.\n\nRuedas detr√°s de un estante. Rodr√≠guez dispara dos veces. El sospechoso cae, herido en el hombro.\n\n"¬°DESPEJADO!"\n\nEl tipo grita de dolor. Est√° vivo. Su arma... espera, es una puta pistola de juguete.\n\nRodr√≠guez la recoge. "Hijo de puta... nos apunt√≥ con esto."\n\nEl sospechoso solloza: "No... no quer√≠a... mi hermana..."`,
                choices: [
                    {
                        text: '<span class="action-indicator">(PRIMEROS AUXILIOS)</span> Atenderlo inmediatamente',
                        next: 'salvar_sospechoso',
                        effects: { morality: 20, reputation: 10 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(INTERROGAR)</span> "¬øTu hermana? ¬°Casi nos matas!"',
                        next: 'interrogatorio_duro',
                        effects: { reputation: 10, violence: 10 },
                        class: 'violent'
                    }
                ]
            },

            ultimo_intento: {
                text: `"¬°NO LO HAGAS! ¬°PIENSA EN TU FAMILIA!"\n\nTus palabras lo detienen por un segundo.\n\nSus ojos... est√°n llenos de l√°grimas detr√°s de la m√°scara.\n\n"Mi familia... es por eso que estoy aqu√≠..."\n\nBANG!\n\nDispara. Pero no a ti. Al techo.\n\nSe derrumba llorando. "No puedo... no puedo hacerlo... mi hermana me necesita..."\n\nSuelta el arma. Es una pistola de juguete.\n\nRodr√≠guez lo esposa r√°pidamente. Te mira con nuevo respeto.\n\n"Tienes agallas, novato. Y coraz√≥n."`,
                choices: [
                    {
                        text: '<span class="action-indicator">(INVESTIGAR)</span> "Cu√©ntame sobre tu hermana."',
                        next: 'escuchar_historia',
                        effects: { morality: 25, instinct: 20 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(ARRESTAR)</span> "Buen intento, pero vas a la c√°rcel."',
                        next: 'arresto_protocolo',
                        effects: { reputation: 10, morality: -10 },
                        class: 'violent'
                    }
                ]
            },

            arresto_protocolo: {
                text: `Lo arrestas. Por el libro.\n\n"Tienes derecho a permanecer en silencio..."\n\n√âl llora todo el camino a la estaci√≥n.\n\nLa investigaci√≥n revela: hermana con leucemia, familia sin seguro, desesperaci√≥n total.\n\nPero la ley es la ley.\n\n2 a√±os de c√°rcel. Su hermana muri√≥ durante el juicio. Sin el tratamiento.\n\nT√©cnicamente hiciste todo correcto.\n\nPero cada noche te preguntas si hab√≠a otra manera.`,
                ending: "FINAL: LA LEY SOBRE LA VIDA",
                endingType: "neutral",
                stats: true
            },

            inicio_corrupcion: {
                text: `"Te dejo ir... por 500 d√≥lares."\n\n√âl te mira confundido. "No... no tengo dinero, por eso..."\n\n"Entonces tu familia puede reunirlo. Tienes 24 horas."\n\nPrimer soborno. Primer paso hacia la oscuridad.\n\nRodr√≠guez te ve. "¬øQu√© haces, novato?"\n\n"Nada, Sargento. Se escap√≥."\n\n"Ya veo."\n\nHas cruzado una l√≠nea que nunca podr√°s descruzar.`,
                ending: "FINAL: EL PRIMER SOBORNO",
                endingType: "bad",
                stats: true
            },

            brutalidad_policial: {
                text: `Le das un pu√±etazo en la cara.\n\nLuego otro. Y otro.\n\nLa rabia toma control. Por casi matarte. Por el miedo que sentiste.\n\nRodr√≠guez te detiene. "¬°BASTA, NOVATO!"\n\nEl chico est√° sangrando. Nariz rota. Labio partido.\n\n"Esto no est√° bien," dice Rodr√≠guez en voz baja.\n\nLo llevan al hospital antes que a la estaci√≥n.\n\nAsuntos Internos abre investigaci√≥n.\n\nSuspensi√≥n de 3 meses sin pago.\n\nCuando vuelves, todos saben lo que hiciste.\n\nTe has convertido en el tipo de polic√≠a que la gente teme.`,
                ending: "FINAL: EL BRUTAL",
                endingType: "bad",
                stats: true
            },

            final_justicia_dura: {
                text: `"¬°¬øTu hermana?! ¬°CASI MATAS A GENTE INOCENTE POR ESO!"\n\nTu rabia es real. El miedo que sentiste se convierte en furia.\n\n√âl va a la c√°rcel. 3 a√±os.\n\nSu hermana muere sin tratamiento.\n\nA√±os despu√©s descubres que exist√≠a un programa de ayuda que nadie les dijo que exist√≠a.\n\nPodr√≠as haberlo investigado. Podr√≠as haber ayudado.\n\nEn cambio, elegiste el castigo sobre la compasi√≥n.\n\nEres un buen polic√≠a. Pero no un buen humano.`,
                ending: "FINAL: JUSTICIA SIN PIEDAD",
                endingType: "neutral",
                stats: true
            },

            final_investigacion: {
                text: `"Verificar√© tu historia."\n\nInvestigas. Todo es verdad. Hermana con leucemia. Familia sin recursos.\n\nPero tambi√©n descubres: existe un programa estatal que cubre estos casos. Nadie se los dijo.\n\nHaces las conexiones necesarias. La hermana recibe tratamiento gratuito.\n\n√âl cumple servicios comunitarios en lugar de c√°rcel.\n\n5 a√±os despu√©s: hermana sana, √©l trabajando como t√©cnico m√©dico de emergencias.\n\n"Oficial, usted no solo me arrest√≥. Me dio una raz√≥n para ser mejor."\n\nRodr√≠guez te asciende. "Eso es ser detective, novato. Ver m√°s all√° de lo obvio."`,
                ending: "FINAL: EL DETECTIVE PERSPICAZ",
                endingType: "best",
                stats: true
            },

            final_sin_remordimiento: {
                text: `"Era una amenaza. Hice lo correcto. Volver√≠a a hacerlo."\n\nRodr√≠guez asiente. "As√≠ es, novato."\n\nEl tiroteo se declara justificado.\n\nPero algo cambi√≥ en ti esa noche. Mataste sin saber si era necesario.\n\nY no sientes nada.\n\nTe conviertes en el tipo de polic√≠a que dispara primero, pregunta despu√©s.\n\n3 tiroteos m√°s en 2 a√±os. Todos "justificados".\n\nLa comunidad te teme. Los criminales te odian.\n\nTus compa√±eros te respetan... pero nadie quiere ser tu amigo.\n\nEres efectivo. Pero has perdido tu humanidad.`,
                ending: "FINAL: LA M√ÅQUINA DE MATAR",
                endingType: "bad",
                stats: true
            },

            final_renuncia: {
                text: `"No puedo hacer esto. Renuncio."\n\nTe quitas la placa. La pones sobre el cap√≥ de la patrulla.\n\nRodr√≠guez no intenta detenerte.\n\n"No todos sirven para esto, novato. Al menos lo descubriste r√°pido."\n\nUn hombre muri√≥ porque dudaste. Esa verdad te persigue.\n\n5 a√±os despu√©s trabajas en ventas. Vida normal. Segura.\n\nPero cada vez que ves un polic√≠a, te preguntas: ¬øQu√© hubiera pasado si no hubiera renunciado?`,
                ending: "FINAL: EL QUE SE RINDI√ì",
                endingType: "bad",
                stats: true
            },

            observacion_tactica: {
                text: `Observas cuidadosamente. Tomas nota de todo.\n\nEl sospechoso est√° nervioso. Se mueve err√°tico. Probablemente drogado.\n\nPero tambi√©n ves: est√° solo. No hay refuerzos. No hay plan de escape real.\n\nEs un amateur. Un desesperado.\n\nRodr√≠guez susurra: "Bien observado. Es un novato, como t√∫. Pero armado."\n\nLa situaci√≥n se est√° calmando. Puedes intentar negociar o actuar.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(HABLAR)</span> Intentar negociaci√≥n por meg√°fono',
                        next: 'intento_negociacion',
                        effects: { morality: 15, instinct: 15 },
                        class: 'diplomatic'
                    },
                    {
                        text: '<span class="action-indicator">(ACTUAR)</span> Entrada t√°ctica coordinada',
                        next: 'tactica_trasera',
                        effects: { instinct: 15, reputation: 10 },
                        class: 'violent'
                    }
                ]
            },

            mentira_tactica: {
                text: `"Te garantizo que no ir√°s a la c√°rcel. Solo sal y hablamos."\n\nEs mentira. Ir√° a la c√°rcel.\n\nPero funciona. Sale con las manos arriba.\n\nCuando le pones las esposas, se da cuenta: "Dijiste... dijiste que no ir√≠a a la c√°rcel..."\n\n"Ment√≠."\n\nSu cara se descompone. "Mi hermana... por favor..."\n\nRodr√≠guez te mira con decepci√≥n.\n\nA√±os despu√©s, esa mentira te come por dentro. Resolviste la situaci√≥n, s√≠.\n\nPero a qu√© costo para tu alma?`,
                ending: "FINAL: EL MENTIROSO EFECTIVO",
                endingType: "neutral",
                stats: true
            },

            persecucion_a_pie: {
                text: `"¬°YO VOY TRAS √âL!"\n\nCorres. Es r√°pido, pero t√∫ tambi√©n.\n\nCallejones. Basura. Perros ladrando.\n\nLo alcanzas en un callej√≥n sin salida.\n\nSe voltea. Pistola en mano... no, pistola de juguete.\n\n"No te acerques... lo har√©..."\n\nEst√° temblando. Es un ni√±o asustado con un juguete.`,
                choices: [
                    {
                        text: '<span class="action-indicator">(DISPARAR)</span> No arriesgarse. Eliminar la amenaza.',
                        next: 'disparo_mortal',
                        effects: { violence: 40, morality: -25 },
                        class: 'violent'
                    },
                    {
                        text: '<span class="action-indicator">(HABLAR)</span> "Es un juguete. Los dos lo sabemos. R√≠ndete."',
                        next: 'final_compasivo',
                        effects: { morality: 25, instinct: 20 },
                        class: 'diplomatic'
                    }
                ]
            },

            verificar_victimas: {
                text: `"¬°Voy a ver si hay heridos!"\n\nEntras a la tienda. Cajero en el suelo. Est√° vivo, asustado, pero sin heridas.\n\nDos clientes. Aterrorizados pero bien.\n\n"¬øAlguien herido?"\n\n"No... no... se asust√≥ y huy√≥..."\n\nRodr√≠guez entra. "El sospechoso escap√≥, pero salvaste vidas al verificar primero."\n\nEl caso queda abierto, pero cero v√≠ctimas.\n\nA veces no atrapar al malo es menos importante que proteger a los buenos.`,
                ending: "FINAL: PRIMERO LAS V√çCTIMAS",
                endingType: "good",
                stats: true
            },

            salvar_sospechoso: {
                text: `Aplicas presi√≥n en la herida. "¬°Necesito una ambulancia!"\n\nRodr√≠guez llama a emergencias.\n\nMientras lo atiendes, √©l susurra: "Mi hermana... leucemia... solo quer√≠a las medicinas..."\n\nLe salvas la vida. Los param√©dicos llegan.\n\nM√°s tarde investigas: todo es verdad. Conectas a su familia con ayuda social.\n\nLa hermana recibe tratamiento. √âl cumple servicios comunitarios.\n\n"Salvaste mi vida dos veces, oficial. Literalmente y figurativamente."`,
                ending: "FINAL: EL SANADOR",
                endingType: "best",
                stats: true
            },

            interrogatorio_duro: {
                text: `"¬°¬øTU HERMANA?! ¬°NOS APUNTASTE CON UN ARMA!"\n\n"Era... era de juguete... nunca... nunca quise..."\n\n"¬°CASI MUERES POR ESO!"\n\n√âl va a la c√°rcel. Su hermana no recibe ayuda.\n\nA√±os despu√©s descubres que exist√≠an programas de asistencia.\n\nPodr√≠as haber investigado. Podr√≠as haber ayudado.\n\nEn cambio, tu rabia decidi√≥ por ti.`,
                ending: "FINAL: LA FURIA CIEGA",
                endingType: "neutral",
                stats: true
            },

            final_ley_ciega: {
                text: `"Rob√≥ una tienda. Amenaz√≥ gente. Es criminal, punto."\n\nRodr√≠guez no est√° de acuerdo, pero no te detiene.\n\nEl chico va a la c√°rcel. 18 meses.\n\nSu hermana muere durante su sentencia. Sin tratamiento.\n\nEn su funeral, te enteras que exist√≠a ayuda disponible. Nadie se las dijo.\n\nSeguiste la ley al pie de la letra.\n\nPero la ley no siempre es justicia.\n\nEres un buen oficial. Pero te falta coraz√≥n.`,
                ending: "FINAL: LETRA MUERTA",
                endingType: "neutral",
                stats: true
            }
        };

        function updateStats() {
            const morality = document.getElementById('morality');
            const reputation = document.getElementById('reputation');
            const instinct = document.getElementById('instinct');
            const violence = document.getElementById('violence');

            morality.textContent = gameState.morality;
            reputation.textContent = gameState.reputation;
            instinct.textContent = gameState.instinct;
            violence.textContent = gameState.violence;

            morality.className = 'stat-value ' + (gameState.morality < 30 ? 'low' : gameState.morality > 70 ? 'high' : '');
            reputation.className = 'stat-value ' + (gameState.reputation < 30 ? 'low' : gameState.reputation > 70 ? 'high' : '');
            instinct.className = 'stat-value ' + (gameState.instinct < 30 ? 'low' : gameState.instinct > 70 ? 'high' : '');
            violence.className = 'stat-value ' + (gameState.violence > 30 ? 'low' : '');
        }

        function showScene(sceneId) {
            const scene = scenes[sceneId];
            if (!scene) {
                console.error('Scene not found:', sceneId);
                return;
            }

            const storyDiv = document.getElementById('story');
            const choicesDiv = document.getElementById('choices');

            storyDiv.innerHTML = scene.text.replace(/\n/g, '<br><br>');
            choicesDiv.innerHTML = '';

            if (scene.ending) {
                const endingDiv = document.createElement('div');
                endingDiv.className = 'ending ' + (scene.endingType || '');
                
                let statsHTML = '';
                if (scene.stats) {
                    statsHTML = `
                        <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.9;">
                            Moral: ${gameState.morality} | Reputaci√≥n: ${gameState.reputation} | 
                            Instinto: ${gameState.instinct} | Violencia: ${gameState.violence}
                        </p>
                    `;
                }
                
                endingDiv.innerHTML = `
                    <h2>${scene.ending}</h2>
                    ${statsHTML}
                    <button class="restart-btn" onclick="restartGame()">Jugar de Nuevo</button>
                `;
                choicesDiv.appendChild(endingDiv);
                return;
            }

            scene.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'choice-btn ' + (choice.class || '');
                button.innerHTML = `${index + 1}. ${choice.text}`;
                button.onclick = () => makeChoice(choice);
                choicesDiv.appendChild(button);
            });
        }

        function makeChoice(choice) {
            if (choice.effects) {
                gameState.morality = Math.max(0, Math.min(100, gameState.morality + (choice.effects.morality || 0)));
                gameState.reputation = Math.max(0, Math.min(100, gameState.reputation + (choice.effects.reputation || 0)));
                gameState.instinct = Math.max(0, Math.min(100, gameState.instinct + (choice.effects.instinct || 0)));
                gameState.violence = Math.max(0, Math.min(100, gameState.violence + (choice.effects.violence || 0)));
            }

            gameState.decisions.push(choice.text);
            updateStats();
            
            if (choice.next && scenes[choice.next]) {
                gameState.currentScene = choice.next;
                showScene(choice.next);
            } else {
                console.error('Next scene not found:', choice.next);
            }
        }

        function restartGame() {
            gameState = {
                morality: 50,
                reputation: 50,
                instinct: 50,
                violence: 0,
                currentScene: 'inicio',
                decisions: [],
                kills: 0,
                wounded: 0
            };
            updateStats();
            showScene('inicio');
        }

        showScene('inicio');
        updateStats();
    </script>
</body>
</html>
